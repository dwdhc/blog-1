---
title: 垃圾佬的 Homelab 瞎折腾（二）
date: 2021-01-01
updated:
slug:
categories:
tag:
copyright: true
comment: true
---

## 你翻车了吗 😭

五一放假后入手了 M1 MacBook Pro ，使用了一段时间后感觉很满意，于是就准备当作主力机来使用。这样一来家里的一台 Ryzen 5 3600 台式机和一台 6600T 的 NAS 小主机就显得多余了。两个台式夹搬家的时候也不方便携带，于是干脆就把 NAS 小主机卖掉了。

然后又发现 M1 的 GPU 好强，众多评测的解决也展示了 M1 的 GPU 性能要比肩 GTX 1050 Ti。Ryzen 5 3600 台式机上的 GTX 1650 平时也不怎么使用，现在也没有太大的兴趣玩游戏，平时只用来看 4K 电影用。既然有了 M1，那 GTX 1650 不如也拆下来卖掉算了，现在显卡涨了很少，多少还能赚点钱😂。

- GTX 1050 vs GTX 1050Ti vs GTX 1650

![](https://p.k8s.li/2021-06-21-09.jpg)

就这样最终把 NAS 小主机准系统 + 6600T CPU 以及 GTX 1650 显卡拆下来卖掉了，由于今年的显卡价格和 CPU 价格比之前都普遍涨了很多，卖出去这些捡来的洋垃圾之后出去之后稳赚 600¥。然后发现微星 B550M 主板在没有显卡和插显示器的情况下无法完成 BIOS 开机自检启动，导致无法进入 bootloader 启动 ESXi 😭。所以必须要一张亮机卡，于是又在闲鱼上花了 150¥ 买了一张 AMD R5 340x 的亮机卡。光有亮机卡还不行，还需要插上显示器（掀桌儿，无奈又花了十几块钱买了一个显卡欺骗器，用于模拟出一台显示器。

既然把 M1 当作主力机使用了，那么之前的 Ryzen 3600 就改装成 Homelab 机器使用，将之前 NAS 小主机上的一些服务和虚拟机迁移过来，顺带再开几台额外的虚拟机使用。将之前 NAS 小主机上的内存插到台式机上，这样就凑够了 32GB 的内存。当时感觉 32GB 还不够，于是又在闲鱼上花了 320¥ 买了一根 16GB 的 DDR4 内存，不料收到货后就翻车了，插上内存条之后主板 BIOS 里无法识别出内存的型号和序列号，并且进入 ESXi 之后就一直卡住了。尝试拔下该内存条后又恢复了，无奈只能联系卖家退货了。常年捡垃圾为数不多的一次翻车事故🤣。

## 虚拟化哪家强？

把主机改装成 Homelab 机器之后第一件事儿就是安装虚拟化系统了，之前折腾过 PVE 和 ESXi 这两种虚拟化。个人认为 ESXi 稳定性要好很多，性能上也不错，而 PVE 虚拟化可玩性则比较好。不过最终我还是选择了 ESXi 虚拟化，PVE 则更适合开发测试环境。

- 个人 Homelab 机器

![](https://p.k8s.li/2021-06-21-03.jpg)



- 之前的 kubespray 开发机，使用公司内部的 IaaS 机器嵌套虚拟化安装 PVE

![](https://p.k8s.li/2021-06-21-07.jpg)

## 虚拟机

- 虚拟机列表

![](https://p.k8s.li/2021-06-21-04.jpg)

- 虚拟机磁盘性能测试

![](https://p.k8s.li/2021-06-21-06.jpg)

## 直通设备

### PCIe 硬盘直通

### SATA 硬盘直通

![](https://p.k8s.li/2021-06-21-05.jpg)

### 显卡直通

- 直通成功之后，使用工具查看显卡状态

![](https://p.k8s.li/2021-06-21-02.jpg)

### USB 设备直通

## RDP 真香

### 调整刷新率为 60Hz

### 开启显卡 3D 加速

![](https://p.k8s.li/2021-06-21-01.jpg)

